# LangGraph ë©€í‹°ì—ì´ì „íŠ¸ ì´ë²¤íŠ¸ ì²˜ë¦¬ ì‹œìŠ¤í…œ

LangGraphë¥¼ ì‚¬ìš©í•œ ë©€í‹°ì—ì´ì „íŠ¸ êµ¬ì¡°ë¡œ êµ¬í˜„ëœ ì´ë²¤íŠ¸ ìë™ ë“±ë¡ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

- âœ… **LangGraph ë©€í‹°ì—ì´ì „íŠ¸**: 3ê°œì˜ ì „ë¬¸ ì—ì´ì „íŠ¸ê°€ í˜‘ì—…
- âœ… **GPT-4o-mini íŒŒì‹±**: í•œêµ­ì–´ í…ìŠ¤íŠ¸ì—ì„œ ì´ë²¤íŠ¸ ì •ë³´ ìë™ ì¶”ì¶œ
- âœ… **Google Sheets ì—°ë™**: ë¯¸ì²˜ë¦¬ ì´ë²¤íŠ¸ ì½ê¸° ë° ê²°ê³¼ ì‘ì„±
- âœ… **Google Calendar ì—°ë™**: ìë™ ì¼ì • ë“±ë¡
- âœ… **LangSmith í†µí•©**: ì‹¤ì‹œê°„ ë””ë²„ê¹… ë° ëª¨ë‹ˆí„°ë§
- âœ… **ì›Œí¬í”Œë¡œìš° ì‹œê°í™”**: Mermaid ë‹¤ì´ì–´ê·¸ë¨ìœ¼ë¡œ ì „ì²´ íë¦„ í™•ì¸

## ğŸ“š ë¬¸ì„œ

- ğŸ“– [ì„¤ì¹˜ ê°€ì´ë“œ (SETUP_GUIDE.md)](SETUP_GUIDE.md) - ìœˆë„ìš°/ë§¥ ì‚¬ìš©ìë¥¼ ìœ„í•œ ìƒì„¸ ì„¤ì¹˜ ë°©ë²•
- ğŸ” [LangSmith ê°€ì´ë“œ (LANGSMITH_GUIDE.md)](LANGSMITH_GUIDE.md) - ë””ë²„ê¹… ë° ëª¨ë‹ˆí„°ë§ ì„¤ì •
- ğŸ“Š [ì›Œí¬í”Œë¡œìš° ë‹¤ì´ì–´ê·¸ë¨ (WORKFLOW_DIAGRAM.md)](WORKFLOW_DIAGRAM.md) - Mermaid ì‹œê°í™”
- ğŸ› ï¸ [Git ì‚¬ìš©ë²• (GIT_USAGE.md)](GIT_USAGE.md) - Git & GitHub í™œìš© ê°€ì´ë“œ

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

### ë©€í‹°ì—ì´ì „íŠ¸ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LangGraph Workflow                        â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Sheets     â”‚ â†’  â”‚    Parser    â”‚ â†’  â”‚   Calendar   â”‚  â”‚
â”‚  â”‚    Agent     â”‚    â”‚    Agent     â”‚    â”‚    Agent     â”‚  â”‚
â”‚  â”‚              â”‚    â”‚  (LLMê¸°ë°˜)   â”‚    â”‚              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â†“                   â†“                    â†“          â”‚
â”‚    ì‹œíŠ¸ ì½ê¸°/ì“°ê¸°        í…ìŠ¤íŠ¸ íŒŒì‹±          ìº˜ë¦°ë” ë“±ë¡   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3ê°œì˜ ì „ë¬¸ ì—ì´ì „íŠ¸

1. **Sheets Agent** (`sheets_agent.py`)
   - êµ¬ê¸€ ì‹œíŠ¸ì—ì„œ ë¯¸ì²˜ë¦¬ ì´ë²¤íŠ¸ ì½ê¸°
   - íŒŒì‹± ê²°ê³¼ë¥¼ ì‹œíŠ¸ì— ì‘ì„±
   - ì²˜ë¦¬ ìƒíƒœ ì—…ë°ì´íŠ¸

2. **Parser Agent** (`parser_agent.py`)
   - LLMìœ¼ë¡œ í…ìŠ¤íŠ¸ íŒŒì‹±
   - ë°ì´í„° ê²€ì¦
   - í˜•ì‹ í™•ì¸

3. **Calendar Agent** (`calendar_agent.py`)
   - êµ¬ê¸€ ìº˜ë¦°ë”ì— ì¼ì • ë“±ë¡
   - ì•Œë¦¼ ì„¤ì •
   - ì´ë²¤íŠ¸ ID ê´€ë¦¬

## ğŸ”„ ì›Œí¬í”Œë¡œìš°

```
1. fetch_events
   â†“
2. select_next_event
   â†“
3. parse_event (Parser Agent)
   â†“
4. validate_data (Parser Agent)
   â†“
5. write_to_sheet (Sheets Agent)
   â†“
6. create_calendar_event (Calendar Agent)
   â†“
7. mark_synced (Sheets Agent)
   â†“
8. check_complete
   â†“
   ëª¨ë“  ì´ë²¤íŠ¸ ì²˜ë¦¬ ì™„ë£Œ?
   - Yes â†’ END
   - No â†’ 2ë²ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
event-calendar-agent-langgraph/
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ state.py               # ì›Œí¬í”Œë¡œìš° ìƒíƒœ ì •ì˜
â”‚   â”œâ”€â”€ sheets_agent.py        # êµ¬ê¸€ ì‹œíŠ¸ ì—ì´ì „íŠ¸
â”‚   â”œâ”€â”€ parser_agent.py        # í…ìŠ¤íŠ¸ íŒŒì‹± ì—ì´ì „íŠ¸
â”‚   â””â”€â”€ calendar_agent.py      # ìº˜ë¦°ë” ì—ì´ì „íŠ¸
â”‚
â”œâ”€â”€ workflow.py                # LangGraph ì›Œí¬í”Œë¡œìš° ì •ì˜
â”œâ”€â”€ main.py                    # ë©”ì¸ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ requirements.txt           # íŒ¨í‚¤ì§€ ì˜ì¡´ì„±
â”œâ”€â”€ .env.example               # í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿
â””â”€â”€ README.md                  # ì´ íŒŒì¼
```

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
cd event-calendar-agent-langgraph

# ê°€ìƒí™˜ê²½ ìƒì„±
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install -r requirements.txt
```

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

```bash
cp .env.example .env
```

`.env` íŒŒì¼ ìˆ˜ì •:
```env
OPENAI_API_KEY=sk-proj-ì—¬ê¸°ì—_ì‹¤ì œ_API_í‚¤
GOOGLE_SHEET_ID=ì—¬ê¸°ì—_ì‹œíŠ¸_ID
GOOGLE_SHEET_NAME=Sheet1
GOOGLE_CALENDAR_ID=primary
```

### 3. OAuth ì¸ì¦ ì„¤ì •

ê¸°ì¡´ í”„ë¡œì íŠ¸ì˜ `oauth_credentials.json`ê³¼ `token.pickle` íŒŒì¼ì„ ì¬ì‚¬ìš©í•˜ê±°ë‚˜,
ìƒˆë¡œ ì„¤ì •í•©ë‹ˆë‹¤ (ìƒì„¸ ë°©ë²•ì€ ê¸°ì¡´ í”„ë¡œì íŠ¸ì˜ `SETUP_OAUTH.md` ì°¸ì¡°).

### 4. ì‹¤í–‰

```bash
python main.py
```

## ğŸ’¡ ê¸°ì¡´ í”„ë¡œì íŠ¸ì™€ì˜ ì°¨ì´ì 

### ê¸°ì¡´ (ë‹¨ìˆœ ìˆœì°¨ ì‹¤í–‰)

```python
# main.py
for event in events:
    parsed = parser.parse(event)
    sheets.write(parsed)
    calendar.create(parsed)
```

- ë‹¨ìˆœí•œ ìˆœì°¨ ì²˜ë¦¬
- ì—ëŸ¬ ì²˜ë¦¬ ì œí•œì 
- í™•ì¥ì„± ë‚®ìŒ

### LangGraph ë²„ì „ (ë©€í‹°ì—ì´ì „íŠ¸)

```python
# workflow.py
workflow = StateGraph(AgentState)
workflow.add_node("parse", parser_agent.parse)
workflow.add_node("write", sheets_agent.write)
workflow.add_node("calendar", calendar_agent.create)
workflow.add_conditional_edges(...)
```

- âœ… ì—ì´ì „íŠ¸ ê°„ ëª…í™•í•œ ì—­í•  ë¶„ë¦¬
- âœ… ìƒíƒœ ê´€ë¦¬ ë° ì¶”ì 
- âœ… ì—ëŸ¬ ì²˜ë¦¬ ë° ì¬ì‹œë„ ê°€ëŠ¥
- âœ… ì¡°ê±´ë¶€ ë¶„ê¸° ë° ë³µì¡í•œ íë¦„ êµ¬í˜„
- âœ… í™•ì¥ì„± ë†’ìŒ (ìƒˆ ì—ì´ì „íŠ¸ ì¶”ê°€ ì‰¬ì›€)
- âœ… ë””ë²„ê¹… ë° ëª¨ë‹ˆí„°ë§ ìš©ì´

## ğŸ¯ LangGraphì˜ ì¥ì 

### 1. ìƒíƒœ ê´€ë¦¬

```python
class AgentState(TypedDict):
    unprocessed_events: List[tuple]
    current_event: Optional[dict]
    processed_events: Annotated[List[EventInfo], add]
    messages: Annotated[List[str], add]
    errors: Annotated[List[dict], add]
    # ...
```

- ì „ì—­ ìƒíƒœë¥¼ í†µí•œ ì—ì´ì „íŠ¸ ê°„ ë°ì´í„° ê³µìœ 
- ì²˜ë¦¬ ê³¼ì • ì¶”ì 
- ì—ëŸ¬ ëˆ„ì  ë° ë¶„ì„

### 2. ì¡°ê±´ë¶€ ë¶„ê¸°

```python
def should_continue(state):
    if state.get("unprocessed_events"):
        return "select_next_event"
    else:
        return "end"

workflow.add_conditional_edges(
    "check_complete",
    should_continue,
    {
        "select_next_event": "select_next_event",
        "end": END
    }
)
```

- ë™ì  ì›Œí¬í”Œë¡œìš° ì œì–´
- ìƒí™©ì— ë”°ë¥¸ ë‹¤ë¥¸ ê²½ë¡œ ì‹¤í–‰

### 3. ì—ì´ì „íŠ¸ í˜‘ì—…

ê° ì—ì´ì „íŠ¸ê°€ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•˜ë©´ì„œë„ ê³µìœ  ìƒíƒœë¥¼ í†µí•´ í˜‘ì—…:

```python
# Parser Agent
result = parser_agent.parse_event_text(state)
# â†’ state["current_event"] ì—…ë°ì´íŠ¸

# Calendar Agent (Parserì˜ ê²°ê³¼ ì‚¬ìš©)
calendar_agent.create_calendar_event(state)
# â†’ state["current_event"]["calendar_event_id"] ì—…ë°ì´íŠ¸
```

### 4. í™•ì¥ ê°€ëŠ¥ì„±

ìƒˆë¡œìš´ ì—ì´ì „íŠ¸ ì¶”ê°€ ì˜ˆì‹œ:

```python
# ì•Œë¦¼ ì—ì´ì „íŠ¸ ì¶”ê°€
class NotificationAgent:
    def send_notification(self, state):
        # ìŠ¬ë™/ì´ë©”ì¼ ì•Œë¦¼ ë°œì†¡
        pass

workflow.add_node("notify", notification_agent.send_notification)
workflow.add_edge("mark_synced", "notify")
```

## ğŸ“Š ì‹¤í–‰ ì˜ˆì‹œ

```bash
$ python main.py

============================================================
ğŸ¤– LangGraph ë©€í‹°ì—ì´ì „íŠ¸ ì´ë²¤íŠ¸ ì²˜ë¦¬ ì‹œì‘
============================================================

ğŸ“Š [Sheets Agent] êµ¬ê¸€ ì‹œíŠ¸ì—ì„œ ë¯¸ì²˜ë¦¬ ì´ë²¤íŠ¸ ì½ê¸°...
âœ… êµ¬ê¸€ ì‹œíŠ¸ì—ì„œ 2ê°œ ì´ë²¤íŠ¸ ë¡œë“œ

============================================================
[1/2] í–‰ 2 ì²˜ë¦¬ ì‹œì‘
============================================================

ğŸ¤– [Parser Agent] í–‰ 2 í…ìŠ¤íŠ¸ íŒŒì‹± ì¤‘...
í…ìŠ¤íŠ¸ ë¯¸ë¦¬ë³´ê¸°: ì—°ì„¸ìì—°ì• ì¹˜ê³¼ ì•ˆë…•í•˜ì„¸ìš”. ê°•ìˆ˜í˜ë‹˜ì˜ ì˜ˆì•½ì€ 11ì›”22ì¼(í† )...
  ğŸ“Œ ì œëª©: ì—°ì„¸ìì—°ì• ì¹˜ê³¼ ì˜ˆì•½
  ğŸ“… ë‚ ì§œ: 2025-11-22
  ğŸ• ì‹œê°„: 12:30
  ğŸ“ ì¥ì†Œ: ì„œìš¸íŠ¹ë³„ì‹œ ì„œì´ˆêµ¬...

âœ“ [Parser Agent] í–‰ 2 ë°ì´í„° ê²€ì¦ ì¤‘...
  âœ… ê²€ì¦ í†µê³¼

ğŸ“ [Sheets Agent] í–‰ 2ì— íŒŒì‹± ê²°ê³¼ ì‘ì„± ì¤‘...
âœ… í–‰ 2ì— íŒŒì‹± ê²°ê³¼ ì‘ì„± ì™„ë£Œ

ğŸ“… [Calendar Agent] í–‰ 2 ìº˜ë¦°ë” ë“±ë¡ ì¤‘...
âœ… ìº˜ë¦°ë”ì— ì´ë²¤íŠ¸ ë“±ë¡ ì™„ë£Œ!
   ì œëª©: ì—°ì„¸ìì—°ì• ì¹˜ê³¼ ì˜ˆì•½
   ì¼ì‹œ: 2025-11-22 12:30

============================================================
âœ… ì „ì²´ ì²˜ë¦¬ ì™„ë£Œ!
============================================================

ğŸ“Š ì²˜ë¦¬ ê²°ê³¼:
  - ì´ ì²˜ë¦¬: 2ê°œ
  - ì„±ê³µ: 2ê°œ
  - ì‹¤íŒ¨: 0ê°œ
```

## ğŸ” ë””ë²„ê¹…

### ìƒíƒœ í™•ì¸

```python
# workflow.py ë˜ëŠ” main.pyì—ì„œ
result = app.invoke(initial_state)
print(result)  # ìµœì¢… ìƒíƒœ ì¶œë ¥
```

### ë¡œê·¸ ì¶”ì 

ê° ì—ì´ì „íŠ¸ì˜ `print()` ì¶œë ¥ìœ¼ë¡œ ì§„í–‰ ìƒí™© ì¶”ì :

```
ğŸ“Š [Sheets Agent] ...
ğŸ¤– [Parser Agent] ...
ğŸ“… [Calendar Agent] ...
```

## ğŸ“ ìŠ¤í„°ë”” í™œìš©

### í•™ìŠµ í¬ì¸íŠ¸

1. **LangGraph ê¸°ë³¸ ê°œë…**
   - StateGraph
   - ë…¸ë“œì™€ ì—£ì§€
   - ì¡°ê±´ë¶€ ë¶„ê¸°

2. **ë©€í‹°ì—ì´ì „íŠ¸ ì„¤ê³„**
   - ì—ì´ì „íŠ¸ ì—­í•  ë¶„ë¦¬
   - ìƒíƒœ ê³µìœ 
   - í˜‘ì—… íŒ¨í„´

3. **ì‹¤ì „ ì‘ìš©**
   - ê¸°ì¡´ ì½”ë“œì™€ LangGraph í†µí•©
   - ì—ëŸ¬ ì²˜ë¦¬ ë° ì¬ì‹œë„
   - í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡° ì„¤ê³„

### ì‹¤ìŠµ ê³¼ì œ

1. **ìƒˆ ì—ì´ì „íŠ¸ ì¶”ê°€**
   - ì•Œë¦¼ ì—ì´ì „íŠ¸ (ìŠ¬ë™/ì´ë©”ì¼)
   - ë¡œê¹… ì—ì´ì „íŠ¸ (ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥)
   - ê²€ì¦ ê°•í™” ì—ì´ì „íŠ¸

2. **ì›Œí¬í”Œë¡œìš° ê°œì„ **
   - ì—ëŸ¬ ë°œìƒ ì‹œ ì¬ì‹œë„ ë¡œì§
   - ë³‘ë ¬ ì²˜ë¦¬ (ì—¬ëŸ¬ ì´ë²¤íŠ¸ ë™ì‹œ ì²˜ë¦¬)
   - ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ì²˜ë¦¬

3. **ì‹œê°í™”**
   - LangGraphì˜ ì‹œê°í™” ê¸°ëŠ¥ í™œìš©
   - ì›Œí¬í”Œë¡œìš° ë‹¤ì´ì–´ê·¸ë¨ ìƒì„±

## ğŸ“š ì°¸ê³  ìë£Œ

- [LangGraph ê³µì‹ ë¬¸ì„œ](https://python.langchain.com/docs/langgraph)
- [LangChain ê³µì‹ ë¬¸ì„œ](https://python.langchain.com/)
- [ë©€í‹°ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ íŒ¨í„´](https://python.langchain.com/docs/use_cases/agent_simulations/)

## ğŸ†š ë¹„êµí‘œ

| íŠ¹ì§• | ê¸°ì¡´ ë²„ì „ | LangGraph ë²„ì „ |
|------|----------|---------------|
| êµ¬ì¡° | ìˆœì°¨ ì‹¤í–‰ | ë©€í‹°ì—ì´ì „íŠ¸ |
| ìƒíƒœ ê´€ë¦¬ | ì—†ìŒ | TypedDictë¡œ ëª…í™•í•œ ìƒíƒœ |
| ì—ëŸ¬ ì²˜ë¦¬ | ì œí•œì  | ìƒíƒœ ì¶”ì  ë° ëˆ„ì  |
| í™•ì¥ì„± | ë‚®ìŒ | ë†’ìŒ (ì—ì´ì „íŠ¸ ì¶”ê°€ ì‰¬ì›€) |
| ë””ë²„ê¹… | ì–´ë ¤ì›€ | ì‰¬ì›€ (ìƒíƒœ ì¶”ì ) |
| ë³µì¡í•œ íë¦„ | êµ¬í˜„ ì–´ë ¤ì›€ | ì¡°ê±´ë¶€ ë¶„ê¸°ë¡œ ì‰½ê²Œ êµ¬í˜„ |
| í•™ìŠµ ê³¡ì„  | ë‚®ìŒ | ì¤‘ê°„ |

## ë¼ì´ì„ ìŠ¤

MIT License
